{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<h1 class="title">Dashboard general</h1>
<p class="subtitle">Resumen básico del sistema de bienestar deportivo.</p>

<div class="columns">

  <div class="column">
    <div class="box has-text-centered">
      <p class="heading">Deportistas activos</p>
      <p class="title">{{ total_deportistas }}</p>
    </div>
  </div>

  <div class="column">
    <div class="box has-text-centered">
      <p class="heading">Entrenadores activos</p>
      <p class="title">{{ total_entrenadores }}</p>
    </div>
  </div>

  <div class="column">
    <div class="box has-text-centered">
      <p class="heading">Evaluaciones registradas</p>
      <p class="title">{{ total_evaluaciones }}</p>
    </div>
  </div>

</div>

<hr>

<h2 class="title is-4">Últimas evaluaciones</h2>

{% if ultimas_evaluaciones and ultimas_evaluaciones|length > 0 %}
<table class="table is-fullwidth is-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Fecha</th>
      <th>Deportista ID</th>
      <th>Entrenador ID</th>
      <th>Estado emocional</th>
      <th>Rendimiento</th>
    </tr>
  </thead>
  <tbody>
    {% for ev in ultimas_evaluaciones %}
    <tr>
      <td>{{ ev.id }}</td>
      <td>{{ ev.fecha }}</td>
      <td>{{ ev.deportista_id }}</td>
      <td>{{ ev.entrenador_id }}</td>
      <td>{{ ev.estado_emocional }}</td>
      <td>{{ ev.rendimiento }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No hay evaluaciones registradas todavía.</p>
{% endif %}

{% endblock %}
